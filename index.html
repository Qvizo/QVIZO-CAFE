<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>QVIZO - MIX√âR OT√ÅZOK</title>
<style>

body 
{
	font-family: 'Arial', sans-serif;
	font-size: 18px;
	text-align: center;
	background-color: #F0E68C;
	margin: 0;
	padding: 0;
	overflow-x: hidden;
	display: flex;
	justify-content: center;
	align-items: center;
	height: 100vh;
}


.start-container, .new-start-container 
{
	margin: 20px;
	max-width: 600px;
	min-height: 500px;
	display: flex;
	flex-direction: column;
	justify-content: center;
	padding: 20px;
	border: 5px solid #333;
	border-radius: 50px;
	background-color: #F5F5DC;
	box-sizing: border-box;
	width: 90%;
	position: relative;
	text-align: center;
}


.question-container, .start-container, .end-container 
{
	margin: 20px;
	max-width: 1200px;         /*‚¨ÖÔ∏è T√öTO hodnotu m√¥≈æe≈° zv√§ƒç≈°i≈• */
	min-height: 800px;        /* ‚¨ÖÔ∏è Alebo aj t√∫to */
	display: flex;
	flex-direction: column;
	justify-content: space-between;
	padding: 20px;
	border: 5px solid #333;
	border-radius: 50px;
	background-color: #F5F5DC;
	box-sizing: border-box;
	width: 90%;
	position: relative;
}


.question-counter 
{
	font-size: 28px;
	color: #777;
	margin-bottom: 10px;
}


.question 
{
	font-size: 62px;
	font-weight: bold;
	color: #333;
	padding: 15px;
	border: 3px solid #800080;
	border-radius: 20px;
	background-color: #F8D1B2;
	margin-bottom: 20px;
	word-wrap: break-word; /* Zabezpeƒç√≠ zalomenie textu */
	white-space: normal; /* Povolenie zalomenia textu */
	text-align: center;
	display: flex;                /* D√¥le≈æit√© */
	align-items: center;          /* Vertik√°lne centrovanie */
	justify-content: center;      /* Horizont√°lne centrovanie */
	flex-grow: 1;
	min-height: 150px; /* Nastavenie minim√°lnej v√Ω≈°ky pre viac riadkov */
	max-height: 150px; /* fixn√° max v√Ω≈°ka napr√≠klad pre 3 riadky */
  	overflow: hidden;  /* ≈æiadne scrollovanie */
	overflow-y: auto;
}


.timer 
{
	font-size: 45px;
	color: #800000;
	font-weight: bold;
	margin-bottom: 20px;
}


.answers 
{
	flex-shrink: 0;
	width: 100%;
	display: flex;
	flex-wrap: wrap;
	justify-content: space-between;
	gap: 20px;
}


.answer-button 
{
	display: flex;
	justify-content: flex-start;
	align-items: center;
	width: 45%;
	margin: 10px 0;
	padding: 12px;
	font-size: 52px;
	font-weight: bold;
	border: none;
	border-radius: 12px;
	background-color: #ddd;
	color: black;
	cursor: pointer;
	box-sizing: border-box;
 	height: 150px; /* Fixn√° v√Ω≈°ka tlaƒçidla */
    overflow: hidden;
    flex-direction: row; /* U≈æ je flex, len na istotu */
    align-items: center;
}


.answer-letter 
{
	display: flex;
	justify-content: center;
	align-items: center;
	background-color: #800080;
	color: white;
	font-size: 50px;
	border-radius: 50%;
	margin-right: 20px;
	width: 60px;
	aspect-ratio: 1 / 1; /* zabezpeƒç√≠ kruhov√Ω tvar */
	flex-shrink: 0; /* zabr√°ni zmen≈°ovaniu pri dlh≈°√≠ch textoch */
}


.answer-text 
{
	flex-grow: 1;
	text-align: center;
    white-space: normal; /* umo≈æn√≠ viac riadkov */
    overflow-wrap: break-word;
    line-height: 1.2;
}


.menu button, .back-button, .stop-button 
{
	margin: 10px;
	padding: 10px 20px;
	font-size: 24px;
	font-weight: bold;
	border-radius: 10px;
	border: 2px solid #333;
	cursor: pointer;
	width: auto;
	margin-left: auto;
	margin-right: auto;
	white-space: nowrap;
}


.back-button 
{
	background-color: #6495ED !important;
	color: white;
}


.back-button:hover 
{
	background-color: #0000CD !important;
}


.stop-button 
{
	background-color: red !important;
	color: white;
}


.stop-button:hover 
{
	background-color: orange !important;
}


.button-container {
	display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
}

.login-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  margin: 20px;
  padding: 20px;
  border: 5px solid #333;
  border-radius: 50px;
  background-color: #F5F5DC;
  width: 90%;
  max-width: 500px;
}

.login-container input {
  font-size: 20px;
  padding: 10px;
  margin: 10px 0;
  width: 70%;
  border-radius: 10px;
  border: 1px solid #333;
}

.login-container button {
  font-size: 20px;
  font-weight: bold;
  padding: 10px 20px;
  margin: 10px 0;   /* aby medzi tlaƒçidlami bola medzera */
  border-radius: 10px;
  border: 2px solid #333;
  cursor: pointer;
  width: 75%;       /* aby boli tlaƒçidl√° rovnako ≈°irok√© */
}

#authMessage {
  margin-top: 10px;
  font-weight: bold;
  color: red;
}

.category-container {
    display: flex;
    justify-content: center;
    gap: 15px;
    flex-wrap: wrap;
    margin-bottom: 40px;   /* üî• TOTO vytvor√≠ v√§ƒç≈°iu medzeru pod kateg√≥riami */
}

.category-btn {
    background-color: #200080;
    color: white;
    font-size: 15px;
    padding: 10px 20px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    transition: 0.3s;
}

.category-btn.active {
    background-color: #800080;
}

@media (max-width: 768px) {

.menu button, .back-button, .stop-button 
{
	font-size: 18px;  /* Zmen≈°√≠me veƒækos≈• textu */
    padding: 8px 16px; /* Zmen≈°√≠me padding */
}

.button-container {
    flex-direction: row; /* Zarovn√°me tlaƒçidl√° vedƒæa seba */
    justify-content: space-between; /* Medzera medzi tlaƒçidlami */
    gap: 10px;
}

.back-button, .stop-button {
        width: 45%; /* Nastav√≠me ≈°√≠rku tlaƒçidiel */
}
}


.qvizo-title 
{
	font-family: 'Broadway', sans-serif;
	font-size: 100px;
	color: red;
	font-weight: bold;
	margin-bottom: 10px;
}


.qvizo-title .q 
{
	color: red;
}


.qvizo-title .vizo 
{
	color: black;
}
	
    
.question-container 
{
	display: none;
}


.question-container .qvizo-title 
{
	font-size: 40px;
}


.question-container .q 
{
	color: red;
}

.question-container .vizo 
{
color: black;
}


.start-container, .end-container 
{
	display: none;
}


.end-container 
{
	text-align: center;
}


.start-container button.start-button 
{
	font-size: 48px;
	padding: 14px 28px;
	background-color: #800080;
	color: white;
	border-radius: 12px;
	border: none;
	cursor: pointer;
	width: auto;
	margin-top: 30px;
	transition: background-color 0.3s ease;
}


.start-container button.start-button:hover 
{
	background-color: #B57EDC;
}


.button-container 
{
	display: flex;
	justify-content: center;
	gap: 20px;
	flex-wrap: wrap;
}


.time-buttons 
{
	margin-top: 20px;
}


.time-button 
{
	font-size: 20px;
	font-weight: bold;
	padding: 10px 20px;
	margin: 5px;
	border-radius: 10px;
	border: 2px solid #333;
	cursor: pointer;
	background-color: #F0E68C;
	transition: background-color 0.3s ease;
	width: 20%; /* Zabezpeƒç√≠, ≈æe tlaƒçidl√° bud√∫ rovnako ≈°irok√© */
}


.time-button.active 
{
	background-color: #B57EDC;
	color: white;
}


.button-container button /* Pridan√© ≈°t√Ωly pre tlaƒçidl√° "Cafe" a "Solo" */
{
	font-size: 30px; /* Zmena veƒækosti p√≠sma */
	font-weight: bold;
	padding: 15px 30px;
	background-color: #800080 !important;
	color: white;
	border-radius: 12px;
	border: none;
	cursor: pointer;
	transition: background-color 0.3s ease;
}


/* CAFE */
.button-container button:first-child {
    background-color: #4CAF50;
}

.button-container button:first-child:hover {
    background-color: #45a049;
}

/* CAFE SOLO */
.button-container .cafe-solo-btn {
    background-color: #1E90FF !important;
}

.button-container .cafe-solo-btn:hover {
    background-color: #187bcd !important;
}

.fullscreen-button 
{
	font-size: 48px;
	padding: 14px 28px;
	background-color: #4CAF50; 
	color: white;
	border-radius: 12px;
	border: none;
	cursor: pointer;
	width: auto;
	margin-top: 30px;
	transition: background-color 0.3s ease, font-size 0.3s ease;
}


.fullscreen-button:hover 
{
	background-color: green;
}


:fullscreen .question-container 
{
  	width: 90%;
  	max-width: 1600px; 
  	height: 90vh;
  	max-height: 90vh;
  	border-radius: 20px; /* Zaoblenie okrajov (m√¥≈æete zmeni≈• alebo odstr√°ni≈•) */
  	padding: 10px;
  	box-sizing: border-box;
  	display: flex;
  	flex-direction: column;
  	justify-content: space-between; /* Umiestni text a odpovede do spr√°vnych poz√≠ci√≠ */
  	overflow: hidden; /* Skryje v≈°etok obsah, ktor√Ω prekraƒçuje */
}


:fullscreen .answers 
{
  display: flex;
  gap: 10px;
  justify-content: space-between; /* Udr≈æuje odpovede v riadku, ale zabezpeƒç√≠ medzery medzi nimi */
    flex-wrap: wrap;  /* zabezpeƒç√≠ zalomenie 5.6.2025*/
}


:fullscreen .answer-button 
{	
	font-size: 32px;
  	line-height: 1.2;              /* V√Ω≈°ka jedn√©ho riadku v n√°sobkoch fontu */
  	height: calc(1.2em * 3 + 30px); /* 3 riadky √ó line-height + padding */
  	width: 48%;  /* Namiesto fixn√Ωch 700px pou≈æi percent√° 5.6.2025*/
  	min-width: 300px; /* Aby sa nezmen≈°ovali pr√≠li≈° 5.6.2025 */
  	box-sizing: border-box;
  	overflow: hidden;
  	display: flex;
  	flex-direction: row;
  	align-items: center;
  	justify-content: flex-start;     
}


:fullscreen .answer-text {
	white-space: normal;
  	overflow-wrap: break-word;
  	text-align: center;
  	display: -webkit-box;
  	-webkit-line-clamp: 3;           /* poƒçet riadkov */
  	-webkit-box-orient: vertical;
  	overflow: hidden;                /* skryje ƒèal≈°√≠ text */
  	font-size: 28px;
  	line-height: 1.2;
}


:fullscreen .qvizo-title {
	margin-bottom: 0px;
}


:fullscreen .question-counter {
	margin-top: 0px;
  	margin-bottom: 5px;
}



:fullscreen .top-bar {
	display: flex;
  	justify-content: space-between;
  	align-items: center;
  	margin: 10px 0;
  	gap: 20px;          /* Primeran√° medzera */
  	flex-wrap: nowrap;  /* zachov√°≈° ich v jednom riadku */
}


:fullscreen .question {
	font-size: 62px ;
  	max-height: 550px;        /* odstr√°ni≈• v√Ω≈°kov√© obmedzenie */
  	min-height: 200px;       /* zv√Ω≈°i minim√°lnu v√Ω≈°ku */
	overflow: hidden;
}


.top-bar 
{
	display: flex;
  	justify-content: space-between;
  	align-items: center;
  	gap: 10px;
  	margin: 20px 0;
  	flex-wrap: nowrap;
}


.start-button, .fullscreen-button 
{
	width: auto;  /* Predvolen√° ≈°√≠rka pre v√§ƒç≈°ie obrazovky */
}


@media (max-width: 768px) {
.start-button, .fullscreen-button 
{
	width: 100%; /* Nastav√≠me tlaƒçidl√°m ≈°√≠rku na 100% */
    font-size: 24px; /* Zn√≠≈æime veƒækos≈• p√≠sma */
    padding: 12px 0;  /* Nastav√≠me padding pre v√§ƒç≈°√≠ priestor */
}
}


@media (max-width: 768px) {
.fullscreen-button 
{
	display: none;
}
}


@media (max-width: 768px) {
.question-container, .start-container, .end-container 
{
	max-width: 100%;
	padding: 10px;
	border-width: 3px;
	border-radius: 30px;
	min-height: auto;
}


@media (max-width: 768px) {
.top-bar 
{
	display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
    flex-wrap: nowrap;  /* D√¥le≈æit√©, aby nepretekali do ƒèal≈°ieho riadku */
    }
    

.left-section, .center-section, .right-section 
{
	flex: 0 1 auto; /* zru≈°√≠me rovnak√© roztiahnutie, aby sa prisp√¥sobili obsahu */
    display: flex;
    align-items: center;
    justify-content: center;
}


.left-section 
{
	justify-content: flex-start;
}


.center-section 
{
	justify-content: center;
    flex-grow: 1; /* Timer nech zaberie zvy≈°n√Ω priestor */
}


.right-section 
{
	justify-content: flex-end;
}


.stop-button, .back-button 
{
	width: auto; /* nech sa prisp√¥sobia obsahu */
    min-width: 80px;
    font-size: 18px;
    padding: 8px 12px;
    white-space: nowrap;
}


.qvizo-title 
{
	font-family: 'Broadway', sans-serif;
	font-size: 36px;
	font-weight: bold;
	margin-bottom: 10px;
}


.qvizo-title .q 
{
	color: red;
}


.qvizo-title .vizo 
{
	color: black;
}


.question-counter 
{
	font-size: 18px;
}


.timer 
{
	font-size: 20px;
    flex-grow: 1;
    text-align: center;
}


.question 
{
	font-size: 24px;
	padding: 10px;
}


.answer-button 
{
	font-size: 22px;
	padding: 10px;
	width: 100%;
	margin: 6px 0;
    	height: auto;         /* Nech sa v√Ω≈°ka prisp√¥sob√≠ obsahu */
    	min-height: 80px;     /* Minim√°lna v√Ω≈°ka */
}


  .answer-text {
   font-size: 18px;      /* Lep≈°ia ƒçitateƒænos≈• na mobile */
}


.answers 
{
	flex-direction: column;
	gap: 10px;
}


.answer-letter 
{
	width: 28px;
	height: 28px;
	font-size: 16px;
	margin-right: 10px;
}


.menu button, .back-button, .stop-button 
{
	font-size 16px;
	padding: 8px 12px;
}


.start-container button.start-button 
{
	font-size: 16px;
	padding: 12px 24px;
}


.start-buttons-wrapper 
{
	display: flex;
  	flex-direction: column;
  	gap: 10px;
  	width: 100%;
}


.time-button 
{
	font-size: 18px;
	padding: 8px 16px;
}


.button-container 
{
	flex-direction: column;
	align-items: center;
}
}


@media (min-width: 769px) {
.question-container, .answers 
{
	max-width: 80%;   /* Nastav ≈°√≠rku na 80% pri desktopoch */
} /*6.6.2025 bolaopacne zatvorka*/


.answers 
{
	flex-direction: row;
}


.answer-button 
{
	width: 45%;
}


.top-bar 
{
	display: flex;
  	justify-content: center;
  	align-items: center;
  	gap: 20px;
  	margin: 20px 0;
  	flex-wrap: wrap;
}


.left-section, .center-section, .right-section 
{
	flex: 1;
  	display: flex;
  	align-items: center;
}


.left-section 
{
	justify-content: flex-start;
}


.center-section 
{
	justify-content: center;
}


.right-section 
{
	justify-content: flex-end;
}


@media screen and (min-width: 1024px) {
:fullscreen .answer-button 
{
	width: 45%;
}
}


@media screen and (max-width: 1023px) {
:fullscreen .answer-button 
{
	width: 100%;
}
}

/* ============================= */
/* NOV√â TLAƒåIDL√Å ‚Äì CAFE SOLO + KATEG√ìRIE */
/* ============================= */

/* Modr√© tlaƒçidlo CAFE SOLO */
.button-container .cafe-solo-btn {
    background-color: #1E90FF !important;
}

.button-container .cafe-solo-btn:hover {
    background-color: #187bcd !important;
}


</style>
<!-- üî• Sem prid√°≈° Firebase SDK -->
<!-- Firebase SDK compat -->
<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-auth-compat.js"></script>

<script>
  // Konfigur√°cia Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyCQWhi-mdf7crzHt-ftmmJGEQJb62Zh57U",
    authDomain: "qvizo-cafe.firebaseapp.com",
    projectId: "qvizo-cafe",
    storageBucket: "qvizo-cafe.firebasestorage.app",
    messagingSenderId: "691251487185",
    appId: "1:691251487185:web:0284ac0e9e47e92663c0f0",
    measurementId: "G-NGCXT5ZE1F"
  };

  // Inicializ√°cia Firebase
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

	// Pr√≠stupov√© k√≥dy
  const validCodes = ["VIP2025", "TAPETA123", "NEZVEREJNUJ"];
	
</script>

</head>
<body>

<!-- 0. OKNO Prihl√°senie -->
<div class="login-container" id="loginWindow">
  <h2 class="qvizo-title">
    <span class="q">Q</span><span class="vizo">VIZO</span>
  </h2>

  <input type="email" id="email" placeholder="Zadaj email">
  <input type="password" id="password" placeholder="Zadaj heslo">

  <button onclick="login()">Prihl√°si≈• sa</button>
  <button onclick="register()">Vytvori≈• √∫ƒçet</button>

  <p id="authMessage"></p>
</div>
	

<!-- 1. OKNO √övod + Overovac√≠ k√≥d -->
<div class="new-start-container" id="newStartWindow">
  <h2 class="qvizo-title">
    <span class="q">Q</span><span class="vizo">VIZO</span>
  </h2>
  <h2>MIX√âR OT√ÅZOK</h2>

  <!-- Overovac√≠ k√≥d -->
  <input type="text" id="accessCode" placeholder="Zadaj k√≥d" 
         style="font-size:20px; padding:10px; margin:10px auto; width:80%; border-radius:10px; border:1px solid #333; display:block; text-align:center;">
  <p id="codeMessage" style="color:red; font-weight:bold;"></p>


<!-- Kateg√≥rie -->
<div class="category-container">
    <button class="category-btn" onclick="toggleCategory('GEO', this)">GEO</button>
    <button class="category-btn" onclick="toggleCategory('HIS', this)">HIS</button>
    <button class="category-btn" onclick="toggleCategory('NAT', this)">NAT</button>
    <button class="category-btn" onclick="toggleCategory('PEO', this)">PEO</button>
    <button class="category-btn" onclick="toggleCategory('MIX', this)">MIX</button>
    <button class="category-btn" onclick="selectAllCategories(this)">ALL</button>
</div>

  <!-- Tlaƒçidlo CAFE -->
  <div class="button-container">
    <button onclick="verifyAndStartCafe()">CAFE</button>
    <button class="cafe-solo-btn" onclick="verifyAndStartCafeSolo()">CAFE SOLO</button>
</div>

</div>

<!-- 2. OKNO V√Ωber ƒçasu-->
<div class="start-container"> 
<h2 class="qvizo-title">
<span class="q">Q</span><span class="vizo">VIZO</span>
</h2>
<h2>MIX√âR OT√ÅZOK</h2>
<p>Posledn√° aktualiz√°cia 15.5.2025</p>
<p>Vyber si ƒçasov√Ω interval</p>
<div class="time-buttons">
<div style="display: flex; justify-content: center; gap: 10px; margin-bottom: 10px;">
<button class="time-button" onclick="setTime(5)">5</button>
<button class="time-button" onclick="setTime(10)">10</button>
</div>
<div style="display: flex; justify-content: center; gap: 10px;">
<button class="time-button" onclick="setTime(15)">15</button>
<button class="time-button" onclick="setTime(20)">20</button>
</div>
<div style="display: flex; justify-content: center; gap: 10px;">
<button class="time-button" onclick="setTime(25)">25</button>
<button class="time-button" onclick="setTime(30)">30</button>
</div>
</div>
<div class="start-buttons-wrapper">
<button class="start-button" onclick="startGame()">≈†TART</button>
<button class="fullscreen-button" onclick="toggleFullScreen()">FULL SCREEN</button>
</div>
</div>

<!-- 3. OKNO Ot√°zky a odpovede-->  
<div class="question-container" style="display: none;">
<div class="qvizo-title">
<span class="q">Q</span><span class="vizo">VIZO</span>
</div>
<div>
<div class="question-counter" id="counter"></div>
</div>
<div class="question" id="question"></div>
<div class="top-bar new-top-bar">
<button class="stop-button" onclick="togglePause()">STOP</button>
<div class="timer" id="timer">ƒåas: 10</div>
<button class="back-button" onclick="backToStart()">SP√Ñ≈§</button>
</div>
<div class="answers">
<div class="answer-button" id="btn0" onclick="answerQuestion(0)">
<div class="answer-letter">A</div>
<div class="answer-text"></div>
</div>
<div class="answer-button" id="btn1" onclick="answerQuestion(1)">
<div class="answer-letter">B</div>
<div class="answer-text"></div>
</div>
<div class="answer-button" id="btn2" onclick="answerQuestion(2)">
<div class="answer-letter">C</div>
<div class="answer-text"></div>
</div>
<div class="answer-button" id="btn3" onclick="answerQuestion(3)">
<div class="answer-letter">D</div>
<div class="answer-text"></div>
</div>
</div>
<!-- Tlaƒçidlo Sp√§≈•-->     
<div class="end-container">
<button onclick="backToStart()" style="font-size: 20px; background-color: #800080; color: white; padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer;">Sp√§≈• na zaƒçiatok</button>
</div>
<script>

window.onload = function() {
  document.getElementById("loginWindow").style.display = "flex";
  document.getElementById("newStartWindow").style.display = "none";
  document.querySelector(".start-container").style.display = "none";
  document.querySelector(".question-container").style.display = "none";
  document.getElementById("loginWindow").style.display = "flex";
};


let selectedQuestions = [];
let currentQuestionIndex = 0;
let timerInterval;
let userSelectedTime = 10;
let timeLeft = 10;
let isPaused = false;
let isCafeSoloMode = false;	

let questions = [];

// Mapovanie kateg√≥ri√≠ na JSON s√∫bory
const categoryFiles = {
  GEO: "geo.json",
  HIS: "his.json",
  NAT: "nat.json",
  PEO: "peo.json",
  MIX: "mix.json"
};

let selectedCategories = [];

function toggleCategory(category, button) {
  if (category === "ALL") return;

  if (selectedCategories.includes(category)) {
    selectedCategories = selectedCategories.filter(c => c !== category);
    button.classList.remove("active");
  } else {
    selectedCategories.push(category);
    button.classList.add("active");
  }

  // Skontroluj, ƒçi s√∫ v≈°etky kateg√≥rie vybran√©
  const allBtn = document.querySelector(".category-btn:last-child"); // tlaƒçidlo ALL
  if (selectedCategories.length === Object.keys(categoryFiles).length) {
    allBtn.classList.add("active");
  } else {
    allBtn.classList.remove("active");
  }

  console.log("Vybran√© kateg√≥rie:", selectedCategories);
}


function selectAllCategories(button) {
  // Ak je ALL u≈æ akt√≠vne, odznaƒç√≠me v≈°etko
  if (button.classList.contains("active")) {
    selectedCategories = [];
    document.querySelectorAll(".category-btn").forEach(btn => btn.classList.remove("active"));
  } else {
    selectedCategories = Object.keys(categoryFiles);
    document.querySelectorAll(".category-btn").forEach(btn => btn.classList.add("active"));
  }

  console.log("Vybran√© kateg√≥rie:", selectedCategories);
}
    
function shuffle(array) {
for (let i = array.length - 1; i > 0; i--) {
const j = Math.floor(Math.random() * (i + 1));
[array[i], array[j]] = [array[j], array[i]];
}
}

function setTime(selectedTime) {
	userSelectedTime = selectedTime;
	timeLeft = userSelectedTime;  // Reset timeLeft whenever a new time is selected
	document.getElementById("timer").innerText = `ƒåas: ${timeLeft}`;
	document.querySelectorAll(".time-button").forEach(btn => btn.classList.remove("active"));
	const clickedBtn = Array.from(document.querySelectorAll(".time-button")).find(btn => btn.innerText.includes(selectedTime));
	if (clickedBtn) clickedBtn.classList.add("active");
}


function adjustFontSizeForQuestion() {
	const questionDiv = document.getElementById("question");
  	const isMobile = window.innerWidth <= 768;
	 // Nastav√≠me in√∫ poƒçiatoƒçn√∫ veƒækos≈• pre mobil/desktop
  	let fontSize = isMobile ? 32 : 88;
    const minFontSize = isMobile ? 16 : 20;
	questionDiv.style.fontSize = fontSize + "px";
	 // Ak sa text nezmest√≠, zmen≈°uj fontSize a≈æ po minim√°lnu hodnotu
  	while (questionDiv.scrollHeight > questionDiv.clientHeight && fontSize > minFontSize) {
    fontSize -= 1;
    questionDiv.style.fontSize = fontSize + "px";
}
}


function adjustFontSizeForAnswers() {
    const isMobile = window.innerWidth <= 768;
    const buttons = document.querySelectorAll('.answer-button');
    buttons.forEach(button => {
    const textDiv = button.querySelector('.answer-text');
    let fontSize = isMobile ? 28 : 52; // men≈°ia veƒækos≈• pre mobil
    textDiv.style.fontSize = fontSize + 'px';
    while (textDiv.scrollHeight > button.clientHeight && fontSize > 12) {
    fontSize -= 1;
    textDiv.style.fontSize = fontSize + 'px';
}
});
}


function startGame() {

  if (selectedCategories.length === 0) {
    alert("Vyber aspo≈à jednu kateg√≥riu!");
    return;
  }

  const filesToLoad = selectedCategories.map(cat => categoryFiles[cat]);

  Promise.all(filesToLoad.map(file => fetch(file).then(res => res.json())))
    .then(jsonSubory => {

      questions = jsonSubory.flat();

      shuffle(questions);

      selectedQuestions = [...questions];
      currentQuestionIndex = 0;

      document.querySelector(".start-container").style.display = "none";
      document.querySelector(".question-container").style.display = "flex";

      showQuestion();
    })
    .catch(error => console.error("Chyba pri naƒç√≠tan√≠ ot√°zok:", error));
}


function showQuestion() {

  const questionDiv = document.getElementById("question");
  questionDiv.style.color = "#333"; // üî• reset farby hneƒè na zaƒçiatku

  const q = selectedQuestions[currentQuestionIndex];
  const shuffledAnswers = [...q.answers];
  shuffle(shuffledAnswers);

  const correctIndex = shuffledAnswers.indexOf(q.answers[q.correct]);
  selectedQuestions[currentQuestionIndex].shuffledCorrect = correctIndex;

  questionDiv.innerText = q.question;

  adjustFontSizeForQuestion();

  document.getElementById("counter").innerText =
    `Ot√°zka ${currentQuestionIndex + 1} / ${selectedQuestions.length}`;

  document.querySelectorAll(".answer-button").forEach((btn, i) => {

    if (isCafeSoloMode) {
      btn.style.display = "none";
    } else {
      btn.style.display = "flex";
      btn.querySelector(".answer-text").innerText = shuffledAnswers[i];
      btn.querySelector(".answer-letter").innerText = ['A', 'B', 'C', 'D'][i];
      btn.style.backgroundColor = "#ddd";
      btn.style.color = "black";
    }

  });
}
	
	adjustFontSizeForAnswers();
	timeLeft = userSelectedTime;
  	document.getElementById("timer").innerText = "ƒåas: " + timeLeft;
  	clearInterval(timerInterval);
  	isPaused = false;
  	document.querySelector(".stop-button").innerText = "STOP";
	timerInterval = setInterval(() => {
    if (!isPaused) {
    timeLeft--;
    document.getElementById("timer").innerText = "ƒåas: " + timeLeft;
    if (timeLeft <= 0) {
    clearInterval(timerInterval);
    highlightCorrectAnswer();
}
}
}, 1000);
}


function highlightCorrectAnswer() {

  if (isCafeSoloMode) {
    const q = selectedQuestions[currentQuestionIndex];
    const correctAnswer = q.answers[q.correct];

    const questionDiv = document.getElementById("question");
    questionDiv.innerText = correctAnswer;  // üî• zobraz√≠ sa iba spr√°vna odpoveƒè
    questionDiv.style.color = "green";

  } else {
    const correctButton = document.querySelectorAll(".answer-button")[selectedQuestions[currentQuestionIndex].shuffledCorrect];
    correctButton.style.backgroundColor = "#4CAF50";
    correctButton.style.color = "white";
  }

  currentQuestionIndex++;

  if (currentQuestionIndex < selectedQuestions.length) {
    setTimeout(() => {
      document.getElementById("question").style.color = "#333";
      showQuestion();
    }, 2000);
  } else {
    setTimeout(() => {
      document.querySelector(".question-container").style.display = "none";
      startGame();
    }, 2000);
  }
}


function togglePause() {
	const stopBtn = document.querySelector(".stop-button");
	isPaused = !isPaused;
	stopBtn.innerText = isPaused ? "Pokraƒçova≈•" : "Stop";
}


function backToStart() {
	document.querySelector(".end-container").style.display = "none";
	document.querySelector(".question-container").style.display = "none";
	document.querySelector(".new-start-container").style.display = "flex";setTimeout
	document.querySelector(".start-container").style.display = "none";
	currentQuestionIndex = 0;
	clearInterval(timerInterval);
	isPaused = false;
	document.querySelector(".stop-button").innerText = "Stop";
	document.getElementById("timer").innerText = `ƒåas: ${userSelectedTime}`;
}


// Funkcia, ktor√° sa zavol√° pri kliknut√≠ na "CAFE"
function startCafe() {
	console.log("Klikol si na CAFE"); // Log pre overenie, ≈æe funkcia sa vykonala
	document.querySelector(".new-start-container").style.display = "none";
	document.querySelector(".start-container").style.display = "block";
}


function toggleFullScreen() {
	if (!document.fullscreenElement) {
	document.documentElement.requestFullscreen().catch(err => {
	alert(`Nepodarilo sa prepn√∫≈• do re≈æimu celej obrazovky: ${err.message}`);
	});
	} else {
	document.exitFullscreen();
}
}

function toggleFullScreen() {
    if (!document.fullscreenElement) {
      document.documentElement.requestFullscreen().catch(err => {
        alert(`Nepodarilo sa prepn√∫≈• do re≈æimu celej obrazovky: ${err.message}`);
      });
    } else {
      document.exitFullscreen();
    }
  }

function login() {
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value.trim();
  if (!email || !password) {
    document.getElementById("authMessage").style.color = "red";
    document.getElementById("authMessage").innerText = "Zadaj email a heslo!";
    return;
  }

  auth.signInWithEmailAndPassword(email, password)
    .then(userCredential => {
      // Skry loginWindow a zobraz newStartWindow (s overovac√≠m k√≥dom + CAFE)
      document.getElementById("loginWindow").style.display = "none";
      document.getElementById("newStartWindow").style.display = "flex";
      document.getElementById("authMessage").innerText = "";
    })
    .catch(error => {
      document.getElementById("authMessage").style.color = "red";
      document.getElementById("authMessage").innerText = error.message;
    });
}


function register() {
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value.trim();

    if (!email || !password) {
      document.getElementById("authMessage").style.color = "red";
      document.getElementById("authMessage").innerText = "Zadaj email a heslo!";
      return;
    }
	auth.createUserWithEmailAndPassword(email, password)
      .then(userCredential => {
        document.getElementById("authMessage").style.color = "green";
        document.getElementById("authMessage").innerText = "√öƒçet vytvoren√Ω! Teraz sa m√¥≈æe≈° prihl√°si≈•.";
      })
      .catch(error => {
        document.getElementById("authMessage").style.color = "red";
        document.getElementById("authMessage").innerText = error.message;
      });
  }
  
function verifyAndStartCafe() {
  const code = document.getElementById("accessCode").value.trim();
  const msg = document.getElementById("codeMessage");

  // Kontrola, ƒçi je vybran√° aspo≈à jedna kateg√≥ria
  if (selectedCategories.length === 0) {
    msg.style.color = "red";
    msg.innerText = "Vyber si aspo≈à jednu kateg√≥riu!";
    return; // Funkcia sa zastav√≠
  }

  // Kontrola k√≥du
  if (validCodes.includes(code)) {
    msg.style.color = "green";
    msg.innerText = "K√≥d spr√°vny!";
	isCafeSoloMode = false;   // üî• vypneme SOLO re≈æim  
    document.querySelector(".new-start-container").style.display = "none";
    document.querySelector(".start-container").style.display = "block";
  } else {
    msg.style.color = "red";
    msg.innerText = "Neplatn√Ω k√≥d! Sk√∫s znova.";
  }
}

function verifyAndStartCafeSolo() {
  const code = document.getElementById("accessCode").value.trim();
  const msg = document.getElementById("codeMessage");

  if (selectedCategories.length === 0) {
    msg.style.color = "red";
    msg.innerText = "Vyber si aspo≈à jednu kateg√≥riu!";
    return;
  }

  if (validCodes.includes(code)) {
    msg.style.color = "green";
    msg.innerText = "K√≥d spr√°vny!";
    
    isCafeSoloMode = true;   // üî• zapneme SOLO re≈æim
    
    document.querySelector(".new-start-container").style.display = "none";
    document.querySelector(".start-container").style.display = "block";
  } else {
    msg.style.color = "red";
    msg.innerText = "Neplatn√Ω k√≥d! Sk√∫s znova.";
  }
}	

	
</script>
</body>

</html>




